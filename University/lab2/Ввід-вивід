/* З клавіатури вводиться номер поїзда, назва сполучення, 
час відправлення з початкової станції і час прибуття на 
кінцеву, а у файл записується номер поїзда,назва сполучення,
час відправлення з початкової станції і час прибуття на кінцеву
та час у дорозі.
*/
#include<iostream> 
#include<fstream> 
#include<string> 
#include<iomanip> 
using namespace std;

int main()
{
	setlocale(LC_ALL, "Russian");
	while (true)
	{
		cout << "Show data – press 1" << endl;
		cout << "Write data - press 2" << endl;
		cout << "Exit – press 3" << endl;

		int choice;
		cin >> choice;

		if (choice == 1)
		{
			int numbTrain;  // Номер поїзда
			string namePlatf;  // Ім'я платформи
			int depertureTime; // Час відправлення
			int arrivalTime;  // Час прибуття
			ifstream infile; // Відкриваю файл 
			infile.open("File.txt"); // Читаю з нього
			if (!infile)     // Якщо нема такого - вивести помилку
			{
				cout << "Cannot open file" << endl;
				return -1;
			}
			//Друкуємо шапку з відступом
			cout << setw(20) << "Number train" << setw(20) << "number platforms" 
			<< setw(20) << "deperture time" <<setw(20) << "arrival time" << endl; 
			while (!infile.eof())
			{
				infile >> numbTrain;    //Виводимо numbTrain
				infile >> namePlatf;	//Виводимо namePlatf
				infile >> depertureTime;//Виводимо depertureTime
				infile >> arrivalTime;  //Виводимо arrivalTime
				if (!infile.eof())     //Виводити доки не завершиться інформація
				{
					cout.width(20);   // Ширина між кожним надписом
					cout << numbTrain; //Виводиться numbTrain і тд.
					cout.width(20);
					cout << namePlatf;
					cout.width(20);
					cout << depertureTime;
					cout.width(20);
					cout << arrivalTime;
					cout << endl;
				}
			}
			infile.close();  // Закриття роботи з файлом
		}
		if (choice == 2)
		{
			int numbTrain;  // Номер поїзда
			string namePlatf;  // Ім'я платформи
			int depertureTime; // Час відправлення
			int arrivalTime;  // Час прибуття

	    // Ввід з клавіатури інформацію
			cin >> numbTrain;  
			cin >> namePlatf;
			cin >> depertureTime;
			cin >> arrivalTime;
	
			fstream outfile("File.txt", ios::app); //Відкриваю файл для додавання в кінець тексту
			if (!outfile)							// Якщо файл відсутній - вивести помилку
			{
				cout << "Cannot open file" << endl;
				return -1;
			}
			outfile.setf(ios::left);  //Вивід файлу з вирівненням по лівому краю поля
			//відступ.заповнення графіку 
			outfile.width(20);		
			outfile << numbTrain << ' '; 
			outfile.width(20);
			outfile << namePlatf << ' ';
			outfile.width(20);
			outfile << depertureTime << ' ';
			outfile.width(20);
			outfile <<arrivalTime << endl;
			outfile.close();
		}
		if (choice == 3)
		{
			break;
		}
	}
	system("pause");
} 

